<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Mini Group — Social Group Buying</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<header class="nav">
		<div class="container nav-inner">
			<div style="display:flex;align-items:center;gap:1rem">
				<button id="navToggle" class="nav-toggle" aria-expanded="false" aria-controls="navMobile">☰</button>
				<div class="logo">Mini <span class="accent">Group</span></div>
			</div>
			<nav class="nav-links">
				<a href="#how">How it Works</a>
				<a href="#features">Features</a>
				<a href="#roadmap">Roadmap</a>
				<a class="cta" href="#create">Create Team Buy</a>
			</nav>
			<div id="navMobile" class="nav-mobile" aria-hidden="true">
				<a href="#how">How it Works</a>
				<a href="#features">Features</a>
				<a href="#roadmap">Roadmap</a>
				<a class="cta" href="#create">Create Team Buy</a>
			</div>
		</div>
	</header>

	<main>
		<section class="hero">
			<div class="container hero-grid">
				<div class="hero-content">
					<h1>Buy Together. Save Together.</h1>
					<img src="/assets/hero-illustration.svg" alt="hero illustration" class="hero-illustration" />
					<p class="lead">Mini Group taps social commerce to remove middlemen — better prices for buyers, higher margins for sellers. Paste any product link, create a Team Buy, share it, and let people contribute.</p>
					<div class="hero-ctas">
						<a class="btn primary" href="#create">Create Team Buy</a>
						<a class="btn ghost" href="#how">Learn How</a>
					</div>
					<ul class="benefits">
						<li>Import from any store (Amazon, eBay, Shopify)</li>
						<li>Secure contributions & escrow</li>
						<li>Shareable links & social visuals</li>
					</ul>
				</div>
				<div class="hero-card" aria-hidden>
					<div class="product-preview">
						<img id="productImg" class="product-img" src="/assets/product-1.svg" alt="Product image">
						<div class="product-body">
							<h3 id="productTitle" class="product-title">Loading…</h3>
							<div class="progress-wrap">
								<div class="progress-label">Raised: <strong id="raisedAmount">$0</strong> of <span id="goalAmount">$0</span></div>
								<div class="progress"><div id="progressBar" class="progress-bar" style="width:0"></div></div>
								<div class="progress-cta">
									<button id="copyLink" class="btn small">Copy Share Link</button>
									<button id="contribute" class="btn small primary">Contribute</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="how" class="section container">
			<h2>How the App Works</h2>
			<div class="grid-3">
				<div class="card">
					<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M12 2v20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
					<h3>Import a Product</h3>
					<p>Paste any product URL — the app parses title, image, and price, letting you source directly from the seller.</p>
				</div>
				<div class="card">
					<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M3 12h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
					<h3>Create a Team Buy</h3>
					<p>Set a target amount, deadline, and contributor limits. Get a shareable link and visual for social networks.</p>
				</div>
				<div class="card">
					<svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M12 3a9 9 0 100 18 9 9 0 000-18z" stroke="currentColor" stroke-width="1.5"/></svg>
					<h3>Collect & Execute</h3>
					<p>Funds are held in escrow. If the goal is met, the platform completes the purchase and arranges shipping. Otherwise, refunds are issued.</p>
				</div>
			</div>
		</section>

		<section id="features" class="section alt">
			<div class="container">
				<h2>Key Features</h2>
				<div class="features-grid">
					<div class="feature">
						<h4>Social Login</h4>
						<p>Fast sign-up via Google, Facebook, Apple.</p>
					</div>
					<div class="feature">
						<h4>Link Parser</h4>
						<p>Easily import products from any store with a bookmarklet or pasted URL.</p>
					</div>
					<div class="feature">
						<h4>Team Dashboard</h4>
						<p>Track all created and joined teams, contributors, and progress at a glance.</p>
					</div>
					<div class="feature">
						<h4>Secure Payments</h4>
						<p>Stripe/PayPal integration with escrow handling and refunds on unmet goals.</p>
					</div>
					<div class="feature">
						<h4>AI Assistant</h4>
						<p>24/7 smart suggestions, one-time offers, ad copy, and cashflow help.</p>
					</div>
					<div class="feature">
						<h4>Seller Portal</h4>
						<p>List products, offer group discounts, and monitor team buys.</p>
					</div>
				</div>
			</div>
		</section>

		<section id="team-buys" class="section container">
			<h2>Live Team Buys (Demo)</h2>
			<div class="team-buys">
				<div id="teamGrid" class="team-grid">
					<!-- populated by JS -->
				</div>
			</div>
		</section>

		<section id="roadmap" class="section container">
			<h2>Development Roadmap</h2>
			<div class="timeline">
				<div class="item"><strong>Phase 1 (MVP, 2-3 weeks)</strong> — Registration, create Team Buy, shareable page, Stripe payments, simple admin.
				</div>
				<div class="item"><strong>Phase 2 (V1)</strong> — Automated refunds, in-team chat, user profiles, notifications.
				</div>
				<div class="item"><strong>Phase 3 (Scale)</strong> — Native apps, seller integrations, split shipping, discovery feed.
				</div>
			</div>
		</section>

		<section id="create" class="section cta-section">
			<div class="container">
				<h2>Ready to start a Team Buy?</h2>
				<p>Create a shareable campaign, invite contributors, and unlock collective buying power.</p>
				<a class="btn large primary" href="#">Create Your Team Buy</a>
			</div>
		</section>
	</main>

	<!-- Modal for Team Buy details -->
	<div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true">
		<div class="modal" role="document">
			<div class="modal-header">
				<h3 id="modalTitle">Team Buy</h3>
				<button id="modalClose" class="modal-close">Close</button>
			</div>
			<div class="modal-body">
				<img id="modalImage" src="/assets/product-1.svg" alt="product">
				<div>
					<div id="modalMeta" class="meta muted">Details</div>
					<div class="progress-wrap" style="margin-top:.6rem">
						<div class="progress-label">Raised: <strong id="modalRaised">$0</strong> of <span id="modalGoal">$0</span></div>
						<div class="progress"><div id="modalBar" class="progress-bar" style="width:0"></div></div>
					</div>
					<div class="contributors">
						<h4>Contributors</h4>
						<ul id="modalContribs" class="muted"></ul>
					</div>
					<div style="margin-top:1rem">
						<button id="modalContribute" class="btn primary">Contribute $50 (demo)</button>
						<button id="modalShare" class="btn ghost">Copy Link</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<footer class="site-footer">
		<div class="container footer-grid">
			<div>
				<div class="logo">Mini <span class="accent">Group</span></div>
				<p class="muted">Helping African businesses scale through social commerce.</p>
			</div>
			<div class="footer-links">
				<a href="#how">How it works</a>
				<a href="#features">Features</a>
				<a href="#roadmap">Roadmap</a>
				<a href="#">Contact</a>
			</div>
		</div>
		<div class="footer-bottom container">© 2025 Mini Group — Built for communities and small businesses.</div>
	</footer>

	<script>
		// Demo: Fetch team buys and render list + modal interactions
		let demoData = [];

		async function fetchTeamBuys(){
			try{
				const res = await fetch('/api/team-buys');
				const data = await res.json();
				demoData = data || [];
				renderPreview(demoData[0]);
				renderTeamGrid(demoData);
			}catch(e){console.error('Failed to load demo data', e)}
		}

		function renderPreview(team){
			if(!team) return;
			document.getElementById('productTitle').textContent = team.title;
			const img = document.getElementById('productImg');
			img.src = team.image || '/assets/product-1.svg';
			img.alt = team.title;
			document.getElementById('raisedAmount').textContent = '$' + team.raised;
			document.getElementById('goalAmount').textContent = '$' + team.goal;
			document.getElementById('progressBar').style.width = Math.min(100, Math.round((team.raised / team.goal) * 100)) + '%';
			document.getElementById('copyLink').dataset.share = team.shareUrl || '';
			// attach open modal to preview contribute button
			document.getElementById('contribute').onclick = () => openModal(team.id);
		}

		function renderTeamGrid(list){
			const grid = document.getElementById('teamGrid');
			grid.innerHTML = '';
			(list||[]).forEach((item, i) => {
				const el = document.createElement('div');
				el.className = 'team-card';
				el.innerHTML = `
					<img src="${item.image}" alt="${item.title}">
					<div>
						<h5>${item.title}</h5>
						<div class="meta">Raised $${item.raised} • Goal $${item.goal}</div>
					</div>`;
				el.addEventListener('click',()=> openModal(item.id));
				// staggered reveal
				el.style.opacity = 0;
				el.style.transition = 'opacity .5s ease, transform .4s ease';
				el.style.transitionDelay = (i * 80) + 'ms';
				el.classList.add('reveal');
				grid.appendChild(el);
			});
		}

		function setupObserver(){
			const items = document.querySelectorAll('.reveal, .card, .feature, .timeline .item, .hero-content, .hero-card');
			const obs = new IntersectionObserver((entries)=>{
				entries.forEach(entry=>{
					if(entry.isIntersecting){
						entry.target.classList.add('in-view');
						entry.target.style.opacity = 1;
						// unobserve to avoid retrigger
						obs.unobserve(entry.target);
					}
				});
			},{threshold:0.12});
			items.forEach(i=>obs.observe(i));
		}

		function openModal(id){
			const item = demoData.find(d=>d.id===id);
			if(!item) return;
			document.getElementById('modalTitle').textContent = item.title;
			document.getElementById('modalImage').src = item.image;
			document.getElementById('modalRaised').textContent = '$'+item.raised;
			document.getElementById('modalGoal').textContent = '$'+item.goal;
			document.getElementById('modalBar').style.width = Math.min(100, Math.round((item.raised / item.goal) * 100)) + '%';
			const ul = document.getElementById('modalContribs'); ul.innerHTML = '';
			(item.contributors||[]).forEach(c=>{ const li = document.createElement('li'); li.textContent = `${c.name} — $${c.amount}`; ul.appendChild(li); });
			document.getElementById('modalShare').dataset.share = item.shareUrl || '';
			const backdrop = document.getElementById('modalBackdrop'); backdrop.style.display='flex'; backdrop.setAttribute('aria-hidden','false');
			// move focus to close button for accessibility
			setTimeout(()=>{ const close = document.getElementById('modalClose'); if(close) close.focus(); }, 60);
			// wire contribute demo
			document.getElementById('modalContribute').onclick = ()=>{
				// simple demo: add a contributor and update UI
				const added = 50; item.raised += added; item.contributors.push({name:'You', amount:added});
				document.getElementById('modalRaised').textContent = '$'+item.raised;
				document.getElementById('modalBar').style.width = Math.min(100, Math.round((item.raised / item.goal) * 100)) + '%';
				const li = document.createElement('li'); li.textContent = `You — $${added}`; document.getElementById('modalContribs').appendChild(li);
				// also update preview and grid
				renderPreview(item);
				renderTeamGrid(demoData);
			};
			// share btn
			document.getElementById('modalShare').onclick = async function(){
				const url = this.dataset.share || item.shareUrl || 'https://mini.group/team/EXAMPLE';
				try{ await navigator.clipboard.writeText(url); this.textContent='Copied!'; setTimeout(()=> this.textContent='Copy Link',2000);}catch(e){alert('Copy failed: '+url)}
			};
		}

		// close modal
		document.getElementById('modalClose').addEventListener('click', ()=>{ const b = document.getElementById('modalBackdrop'); b.style.display='none'; b.setAttribute('aria-hidden','true'); });
		document.getElementById('modalBackdrop').addEventListener('click', (e)=>{ if(e.target.id==='modalBackdrop'){ const b = document.getElementById('modalBackdrop'); b.style.display='none'; b.setAttribute('aria-hidden','true'); } });

		// close modal with Escape and trap focus briefly
		document.addEventListener('keydown', (e)=>{
			if(e.key === 'Escape'){
				const b = document.getElementById('modalBackdrop'); if(b && b.style.display==='flex'){ b.style.display='none'; b.setAttribute('aria-hidden','true'); }
				// also close mobile nav if open
				const mobile = document.getElementById('navMobile'); if(mobile && mobile.style.display==='block'){ toggleMobileNav(false); }
			}
		});

		// mobile nav toggle
		const navToggleBtn = document.getElementById('navToggle');
		function toggleMobileNav(force){
			const mobile = document.getElementById('navMobile');
			if(!mobile) return;
			const isOpen = typeof force === 'boolean' ? force : mobile.style.display === 'block';
			if(isOpen){
				mobile.style.display='none'; navToggleBtn.setAttribute('aria-expanded','false'); mobile.setAttribute('aria-hidden','true');
			}else{
				mobile.style.display='block'; navToggleBtn.setAttribute('aria-expanded','true'); mobile.setAttribute('aria-hidden','false');
			}
		}
		navToggleBtn?.addEventListener('click', ()=> toggleMobileNav());

		// copy link from hero
		document.getElementById('copyLink')?.addEventListener('click', async function(){
			const demoLink = this.dataset.share || 'https://mini.group/team/EXAMPLE123';
			try{ await navigator.clipboard.writeText(demoLink); this.textContent='Copied!'; setTimeout(()=> this.textContent='Copy Share Link',2000);}catch(e){alert('Copy failed — here is the link: '+demoLink)}
		});

		// initial load
		fetchTeamBuys().then(()=> setupObserver()).catch(()=> setupObserver());
	</script>
</body>
</html>
